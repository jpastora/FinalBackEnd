<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compra Completada - Vibetickets</title>
    <link rel="stylesheet" type="text/css" href="/css/pago_completado.css">
    <link rel="stylesheet" type="text/css" href="/css/menu.css">
    <link rel="stylesheet" type="text/css" href="/css/footer.css">
    <link rel='stylesheet'
      href='https://cdn-uicons.flaticon.com/2.6.0/uicons-solid-straight/css/uicons-solid-straight.css'>
  </head>
  
  <body>
    
    <!-- Menú y Autenticación -->

    <%- include('../partials/auth') %> <!-- Incluye el Auth -->
    <%- include('../partials/menu') %> <!-- Incluye el menú -->
  
    <!-- Fin Menú y Autenticación -->
  
    <main class="completado-container">
        <div class="completado-content">
            <div class="success-icon">
                <i class="fi fi-ss-check-circle"></i>
            </div>
            <div class="orden-info">
                <h1>¡Compra Realizada con Éxito!</h1>

                <h2>Número de Orden: #<%= ordenId %></h2>
                <p class="fecha"><%= new Date().toLocaleDateString('es-ES', { 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                }) %></p>
            </div>

            <div class="resumen-tickets">
                <h3>Resumen de tu Compra</h3>
                <% if (tickets && tickets.length > 0) { %>
                    <% tickets.forEach(ticket => { %>
                        <div class="ticket-item">
                            <h4><%= ticket.evento.nombre %></h4>
                            <p>Cantidad: <%= ticket.cantidad %> tickets</p>
                            <p>Precio unitario: ₡<%= (ticket.precioTotal / ticket.cantidad).toLocaleString() %></p>
                            <p>Total: ₡<%= ticket.precioTotal.toLocaleString() %></p>
                        </div>
                    <% }); %>
                <% } else { %>
                    <p>No se encontraron detalles de la compra</p>
                <% } %>
            </div>

            <div class="total-compra">
                <p><strong>Total Pagado:</strong> ₡<%= totalCompra.toLocaleString() %></p>
            </div>

            <div class="buttons">
                <a href="/perfil/mis-tickets" class="btn-primary">Ver mis Tickets</a>
                <a href="/" class="btn-secondary">Volver al Inicio</a>
            </div>
        </div>
    </main>

  <!-- Footer -->
  <%- include('../partials/footer') %>
  <!-- Fin Footer -->
</body>

</html>
