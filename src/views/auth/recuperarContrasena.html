<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Iniciar Sesión - VibeTickets</title>
    <link rel="stylesheet" type="text/css" href="/css/login.css">
    <link rel="stylesheet" type="text/css" href="/css/menu.css">
    <link rel="stylesheet" type="text/css" href="/css/footer.css">
    <link rel='stylesheet'
      href='https://cdn-uicons.flaticon.com/2.6.0/uicons-solid-straight/css/uicons-solid-straight.css'>
  </head>
  
  <body>
  
  <!-- Menú y Autenticación -->

  <%- include('../partials/auth') %> <!-- Incluye el Auth -->
  <%- include('../partials/menu') %> <!-- Incluye el menú -->

  <!-- Fin Menú y Autenticación -->
  
    <!-------------------------------------------Banner---------------------------------------------->
  
    <section class="heroeImangen" id="heroe__imangen">
      <section>
          <div class="heroe" id="heroe__principal">
              <div class="titulo" id="administrarusuarios">
              <h1>Recuperar Contraseña</h1>
              </div>
          </div>
      </section>
    </section>
  
    <!-------------------------------------------FIN Banner---------------------------------------------->



    <div class="contenedorAutenticacion">
      <h2>Recuperar Contraseña</h2>
      <p>Ingrese el correo electrónico asociado a su cuenta</p>

      <!-- Formulario de Inicio de Sesión -->
      <form id="recuperarForm" method="POST" action="/recuperar-contrasena">
          <div class="form-group">
              <label for="email">Correo Electrónico</label>
              <input type="email" id="email" name="email" required>
          </div>
          <button type="submit">Recuperar Contraseña</button>
      </form>
      <!-- Fin Formulario de Inicio de Sesión -->
      <div class="infoAdi" >
      <p>¿Nuevo en VibeTickets? <a href="/auth/registro">Regístrese</a></p>
    </div>
  </div>

  <script>
  document.getElementById('recuperarForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      try {
          const response = await fetch('/recuperar-contrasena', {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                  email: document.getElementById('email').value
              })
          });
          const data = await response.json();
          if (data.success) {
              alert('Se ha enviado una nueva contraseña a tu correo electrónico');
              window.location.href = '/auth/login';
          } else {
              alert(data.error || 'Error al procesar la solicitud');
          }
      } catch (error) {
          alert('Error al procesar la solicitud');
      }
  });
  </script>

  <!-- Footer -->
  <%- include('../partials/footer') %>
  <!-- Fin Footer -->




</body>

</html>